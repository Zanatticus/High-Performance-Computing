# Problem 1 (30 Points)

In this problem you will develop two different implementations of the computation of pi (p) numerically using pthreads and OpenMP. Then you will compare them in terms of scalability and accuracy. Undergraduates/PLUS-One students only need to complete parts b and c of this problem for full credit, though can complete part a (i.e., the pthreads implementation) to receive 20 points of quiz extra credit. In this problem, you will develop a program that computes the value of pi. You can refer to the following video that suggests a way to compute this using Monte Carlo simulation: https://www.youtube.com/watch?v=M34TO71SKGk&ab_channel=PhysicsGirl 

This is not the most efficient way to compute pi, though will provide you with a baseline. There are better ways to compute the value. Select a more efficient method (e.g., Leibniz’s formula) and compare it to the Monte Carlo method in terms of convergence rate, assessing the accuracy of the value of pi as a function of runtime. 

a. Evaluate the speedup that you achieve by using pthreads and multiple cores. You are free to use as many threads as you like. The program should take two input parameters, the  number of threads and the number of “darts” thrown. Your program should print out the time required to compute pi and the final value of pi. Make sure to document the system you are running on and the number of hardware threads available. 

b. Now develop the same program using OpenMP. Repeat all of the steps requested in part a. 

c. Now compare the two implementations in terms of strong and weak scaling, where the number of Monte Carlo simulations (i.e., “darts” thrown) is used to assess weak scaling. Make sure you plot your results.

* Written answers to the questions should be included in your homework 2 write-up in pdf format. You should include your C/C++ program and the README file in the zip file submitted.

## Part (a)

Data was collected on the following system:
Vector Node Xi, Intel(R) Xeon(R) CPU E5-2698 v4 @ 2.20GHz, 80 cores, running at 3600 MHz

### Monte Carlo Method for Approximating PI using Pthreads

| **Number of "Darts"** 	|         1000000        	|         1000000         	|         1000000         	|         1000000         	|         1000000         	|          1000000         	|          1000000         	|          1000000         	|
|:---------------------:	|:----------------------:	|:-----------------------:	|:-----------------------:	|:-----------------------:	|:-----------------------:	|:------------------------:	|:------------------------:	|:------------------------:	|
|      **Threads**      	|            1           	|            2            	|            4            	|            8            	|            16           	|            32            	|            64            	|            128           	|
|    **Latency (s)**    	| 0.16118687900000000512 	| 0.085395628000000001201 	| 0.042522277999999996689 	| 0.024704975000000000546 	| 0.012632099000000000799 	| 0.0082375279999999991704 	| 0.0063886009999999998285 	| 0.0076575360000000003771 	|
|    **Value of Pi**    	|  3.1395879999999998233 	|  3.1414119999999998711  	|  3.1399599999999998623  	|  3.1422360000000000291  	|  3.1415359999999998841  	|   3.1435719999999998109  	|   3.1396440000000001014  	|   3.1410840000000002092  	|


| **Number of "Darts"** 	|         1000000        	|         2000000        	|         4000000        	|         8000000        	|        16000000        	|        32000000        	|        64000000        	|        128000000       	|
|:---------------------:	|:----------------------:	|:----------------------:	|:----------------------:	|:----------------------:	|:----------------------:	|:----------------------:	|:----------------------:	|:----------------------:	|
|      **Threads**      	|            1           	|            2           	|            4           	|            8           	|           16           	|           32           	|           64           	|           128          	|
|    **Latency (s)**    	| 0.15077426899999998855 	| 0.16409439400000000453 	| 0.17479591799999999457 	| 0.18029720499999998817 	| 0.18606627600000000267 	| 0.18886848300000000367 	| 0.26880689400000001843 	| 0.48449482900000001573 	|
|    **Value of Pi**    	|  3.1420960000000000001 	|  3.1408920000000000172 	|  3.1426059999999997885 	|  3.1412710000000001465 	|  3.1415177500000002198 	|  3.1413941250000001482 	|  3.1417263750000001821 	|  3.1416564687499999309 	|

### Leibniz's Formula for Approximating PI using Pthreads

| **Number of "Darts"** 	|          1000000         	|          1000000         	|          1000000         	|         1000000         	|          1000000         	|          1000000         	|          1000000         	|         1000000         	|
|:---------------------:	|:------------------------:	|:------------------------:	|:------------------------:	|:-----------------------:	|:------------------------:	|:------------------------:	|:------------------------:	|:-----------------------:	|
|      **Threads**      	|             1            	|             2            	|             4            	|            8            	|            16            	|            32            	|            64            	|           128           	|
|    **Latency (s)**    	| 0.0049752659999999998899 	| 0.0029220620000000000101 	| 0.0032186810000000001461 	| 0.003444884999999999961 	| 0.0035293070000000001905 	| 0.0030120680000000001238 	| 0.0030746689999999999264 	| 0.004674835999999999922 	|
|    **Value of Pi**    	|   3.1415951251983642578  	|   3.1415946483612060547  	|   3.1415946483612060547  	|  3.1415956020355224609  	|   3.1415953636169433594  	|   3.1415951251983642578  	|   3.1415979862213134766  	|  3.1415963172912597656  	|


| **Number of "Darts"** 	|          1000000         	|          2000000         	|         4000000        	|         8000000         	|         16000000        	|         32000000        	|        64000000        	|        128000000       	|
|:---------------------:	|:------------------------:	|:------------------------:	|:----------------------:	|:-----------------------:	|:-----------------------:	|:-----------------------:	|:----------------------:	|:----------------------:	|
|      **Threads**      	|             1            	|             2            	|            4           	|            8            	|            16           	|            32           	|           64           	|           128          	|
|    **Latency (s)**    	| 0.0050190429999999999419 	| 0.0066258960000000000426 	| 0.01358470399999999953 	| 0.027963447999999998389 	| 0.062699993999999995009 	| 0.088700306000000006534 	| 0.14129925400000001301 	| 0.17802410499999998805 	|
|    **Value of Pi**    	|   3.1415951251983642578  	|   3.1415956020355224609  	|  3.1415958404541015625 	|  3.1415958404541015625  	|  3.1415958404541015625  	|  3.1415958404541015625  	|  3.1415958404541015625 	|  3.1415958404541015625 	|


### Monte Carlo Method for Approximating PI using OpenMP

| **Number of "Darts"** |         1000000        |         1000000         |         1000000         |         1000000         |         1000000         |          1000000         |          1000000         |         1000000         |
|:-----------------:|:----------------------:|:-----------------------:|:-----------------------:|:-----------------------:|:-----------------------:|:------------------------:|:------------------------:|:-----------------------:|
|      **Threads**      |            1           |            2            |            4            |            8            |            16           |            32            |            64            |           128           |
|    **Latency (s)**    | 0.14858744900000001032 | 0.076039149999999999796 | 0.039739611000000001073 | 0.021159208999999998269 | 0.013158589999999999523 | 0.0071089229999999996312 | 0.0066883949999999997571 | 0.013466173999999999158 |
|    **Value of Pi**    |  3.1410759999999999792 |  3.1411679999999999602  |  3.1404800000000001603  | 3.1403279999999997862   | 3.1406520000000002213   | 3.142183999999999866     | 3.142592000000000052     | 3.1413079999999999892   |


| **Number of "Darts"** |         1000000        |         2000000        |         4000000        |         8000000        |        16000000        |        32000000        |        64000000        |        128000000       |
|:-----------------:|:----------------------:|:----------------------:|:----------------------:|:----------------------:|:----------------------:|:----------------------:|:----------------------:|:----------------------:|
|      **Threads**      |            1           |            2           |            4           |            8           |           16           |           32           |           64           |           128          |
|    **Latency (s)**    | 0.14090012199999998876 | 0.17676348599999999744 | 0.17684653000000000178 | 0.18447772300000001011 | 0.19189218699999999185 | 0.18603232000000000101 | 0.26840049199999999052 | 0.48054559099999999416 |
|    **Value of Pi**    |  3.1413959999999998551 |  3.1412219999999999587 |  3.1416529999999998068 | 3.1421594999999999942  | 3.141157000000000199   | 3.1416082499999999911  | 3.141736750000000189   | 3.1416990937499997827  |

### Leibniz's Formula for Approximating PI using OpenMP

| **Number of "Darts"** |          1000000         |          1000000         |          1000000         |          1000000         |          1000000         |          1000000         |          1000000         |          1000000         |
|:-----------------:|:------------------------:|:------------------------:|:------------------------:|:------------------------:|:------------------------:|:------------------------:|:------------------------:|:------------------------:|
|      **Threads**      |             1            |             2            |             4            |             8            |            16            |            32            |            64            |            128           |
|    **Latency (s)**    | 0.0045145439999999996752 | 0.0028291240000000001352 | 0.0016725909999999999649 | 0.0011379560000000000803 | 0.0010046320000000000944 | 0.0014219669999999998925 | 0.0014219669999999998925 | 0.0014219669999999998925 |
|    **Value of Pi**    |   3.1415951251983642578  |   3.1415946483612060547  |   3.1415946483612060547  | 3.1415953636169433594    | 3.1415951251983642578    | 3.1415956020355224609    | 3.1415956020355224609    | 3.1415956020355224609    |


| **Number of "Darts"** |          1000000         |          2000000         |          4000000         |          8000000         |         16000000         |         32000000         |         64000000         |        128000000        |
|:-----------------:|:------------------------:|:------------------------:|:------------------------:|:------------------------:|:------------------------:|:------------------------:|:------------------------:|:-----------------------:|
|      **Threads**      |             1            |             2            |             4            |             8            |            16            |            32            |            64            |           128           |
|    **Latency (s)**    | 0.0048865310000000003812 | 0.0054310970000000001814 | 0.0054509160000000000945 | 0.0054415849999999996514 | 0.0067302899999999998837 | 0.0070495810000000000764 | 0.0089076750000000003149 | 0.026552492000000000455 |
|    **Value of Pi**    |   3.1415951251983642578  |   3.1415956020355224609  |   3.1415958404541015625  | 3.1415958404541015625    | 3.1415958404541015625    | 3.1415960788726806641    | 3.1415958404541015625    | 3.1415960788726806641   |

### Miscellaneous Observations

When running Leibniz's Formula with a depth of 5 and on one thread:

> SUM: 1  
> SUM: 0.6666666**865**348815918  
> SUM: 0.8666666**746**1395263672  
> SUM: 0.7238095**402**717590332  
> SUM: 0.8349206**447**6013183594  
> Approximated value of PI: **3.3396825**790405273438

The actual values (according to a calculator) should be:

> SUM: 1  
> SUM: 0.6666666**667**  
> SUM: 0.8666666**667**  
> SUM: 0.7238095**238**  
> SUM: 0.8349206**349**  
> Approximated value of PI: **3.3396825**397  

This clearly showcases the inaccuracies and lack of precision with floating point data types on computers. There is a limit to precision!

## Part (b)


## Part (c)


## Miscellaneous
- The program was compiled and run using the following command within the respective makefile directory for each implementation:
```make```